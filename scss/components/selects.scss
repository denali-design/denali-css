@charset "utf-8";
// Copyright 2019, Oath Inc.
// Licensed under the terms of the MIT license. See LICENSE file in project root for terms.

@import '../themes/denali-default-theme.scss';

.input {

  &.has-arrow:before {
    content: url('data:image/svg+xml;charset=UTF-8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path style="fill:#{deep-map-get($denali-default-theme, "fields", "dropdown-arrow-color")}" d="M24,27.17,13.4,16.59a2,2,0,0,0-3.05.25,2.07,2.07,0,0,0,.3,2.65L22.59,31.41a2,2,0,0,0,2.83,0L37.35,19.49a2.07,2.07,0,0,0,.3-2.65,2,2,0,0,0-3-.25Z"/></svg>');
    pointer-events: none;
    opacity: .4;
    position: absolute;
    margin-top: 9px;
    margin-left: calc(100% - 26px);
    height: 18px;
    width: 18px;
  }

  // Select dropdown
  select {
    background: deep-map-get($denali-default-theme, "fields", "default", "background");
    border-radius: deep-map-get($denali-default-theme, "fields", "corner-radius");
    color: deep-map-get($denali-default-theme, "fields", "default", "text-color");
    height: deep-map-get($denali-default-theme, "fields", "sizes", "default", "height");
    appearance: none;
    -webkit-appearance: none;
    flex: 1 0 auto;
    font: inherit;
    outline: none;
    transition: 200ms;
    border: none;
    box-shadow: none;
    text-align: left;
    width: inherit;
    margin: 0;
    position: relative;
    padding: 0px 12px;
    border-bottom: solid 2px transparent;

    &:active,
    &:focus,
    &[disabled] {
      border-bottom-style: solid;
    }

    &:invalid {
      box-shadow: inset 0 -2px 0 $status-danger;
    }

    &::placeholder {
      color: deep-map-get($denali-default-theme, "fields", "placeholder", "text-color");
    }

    &:active,
    &:focus {
      border-bottom-width: deep-map-get($denali-default-theme, "fields", "focus", "border-bottom", "size");
      border-bottom-color: deep-map-get($denali-default-theme, "fields", "focus", "border-bottom", "color");
    }

    &[disabled] {
      background: deep-map-get($denali-default-theme, "fields", "disabled", "background");
      color: deep-map-get($denali-default-theme, "fields", "disabled", "text-color");
      border-bottom-width: deep-map-get($denali-default-theme, "fields", "disabled", "border-bottom", "size");
      border-bottom-color: deep-map-get($denali-default-theme, "fields", "disabled", "border-bottom", "color");
    }
  }

  &.is-active > select,
  &.is-error > select {
    border-bottom-style: solid;
  }

  // Forced Active State
  &.is-active > select {
    border-bottom-width: deep-map-get($denali-default-theme, "fields", "focus", "border-bottom", "size");
    border-bottom-color: deep-map-get($denali-default-theme, "fields", "focus", "border-bottom", "color");
  }

  // Error state
  &.is-error > select {
    border-bottom-width: deep-map-get($denali-default-theme, "fields", "error", "border-bottom", "size");
    border-bottom-color: deep-map-get($denali-default-theme, "fields", "error", "border-bottom", "color");
  }

  // Inverse
  &.is-dark > select {
    background: rgba(242, 242, 242, 0.1);
    color: $grey-100;

    &::placeholder {
      color: rgba($grey-100, 0.6);
    }

    &:active,
    &:focus {
      background: rgba(242, 242, 242, 0.1);
      box-shadow: inset 0 -2px 0 $brand-700;
    }

    &[disabled] {
      background: rgba($grey-100, 0.1);
      box-shadow: inset 0 -2px 0 rgba($grey-100, 0.05);
      color: rgba($grey-100, 0.1);

      &::placeholder {
        color: rgba($grey-100, 0.2);
      }
    }
  }

  // Sizes
  &.is-medium > select {
    height: deep-map-get($denali-default-theme, "fields", "sizes", "medium", "height");
    margin-top: 6px;
  }

  &.is-small > select {
    height: deep-map-get($denali-default-theme, "fields", "sizes", "small", "height");
    margin-top: 5px;
  }
}

@mixin selects-base-theme($theme-config) {
  .input {

    &.has-arrow:before {
      content: url('data:image/svg+xml;charset=UTF-8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path style="fill:#{deep-map-get($theme-config, "fields", "dropdown-arrow-color")}" d="M24,27.17,13.4,16.59a2,2,0,0,0-3.05.25,2.07,2.07,0,0,0,.3,2.65L22.59,31.41a2,2,0,0,0,2.83,0L37.35,19.49a2.07,2.07,0,0,0,.3-2.65,2,2,0,0,0-3-.25Z"/></svg>');
    }

    // Select dropdown
    select {
      background: deep-map-get($theme-config, "fields", "default", "background");
      border-radius: deep-map-get($theme-config, "fields", "corner-radius");
      color: deep-map-get($theme-config, "fields", "default", "text-color");
      height: deep-map-get($theme-config, "fields", "sizes", "default", "height");

      &::placeholder {
        color: deep-map-get($theme-config, "fields", "placeholder", "text-color");
      }

      &:active,
      &:focus {
        border-bottom-width: deep-map-get($theme-config, "fields", "focus", "border-bottom", "size");
        border-bottom-color: deep-map-get($theme-config, "fields", "focus", "border-bottom", "color");
      }

      &[disabled] {
        background: deep-map-get($theme-config, "fields", "disabled", "background");
        color: deep-map-get($theme-config, "fields", "disabled", "text-color");
        border-bottom-width: deep-map-get($theme-config, "fields", "disabled", "border-bottom", "size");
        border-bottom-color: deep-map-get($theme-config, "fields", "disabled", "border-bottom", "color");
      }
    }

    // Forced Active State
    &.is-active > select {
      border-bottom-width: deep-map-get($theme-config, "fields", "focus", "border-bottom", "size");
      border-bottom-color: deep-map-get($theme-config, "fields", "focus", "border-bottom", "color");
    }

    // Error state
    &.is-error > select {
      border-bottom-width: deep-map-get($theme-config, "fields", "error", "border-bottom", "size");
      border-bottom-color: deep-map-get($theme-config, "fields", "error", "border-bottom", "color");
    }

    // Sizes
    &.is-medium > select {
      height: deep-map-get($theme-config, "fields", "sizes", "medium", "height");
    }

    &.is-small > select {
      height: deep-map-get($theme-config, "fields", "sizes", "small", "height");
    }
  }
}
